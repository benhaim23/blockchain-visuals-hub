
# 13. Wallet Analysis — Clustering, Labeling, and Activity Tracking

When you analyze onchain data, you're ultimately tracking human (or bot) behavior. Every transaction, every swap, every NFT mint—behind them all is a wallet address. And what happens within and between wallets tells a story.

In this article, we'll explore the art and science of wallet analytics: clustering related addresses, identifying key actors, and tracking activity patterns over time.

---

## 🧠 Why Wallet Analytics Matters

Blockchain pseudonymity means one person might control dozens of addresses. Understanding these connections reveals:

- Wash trading in NFT and token markets
- Sybil attacks in airdrops and voting systems
- Protocol usage by unique individuals vs raw transaction count
- Whale influence and concentration risk
- Market manipulation tactics

Without wallet analysis, raw transaction data can be misleading.

---

## 🔍 Clustering Techniques

Here are common approaches to grouping related wallets:

### 1. Co-spending Heuristics

When multiple addresses contribute inputs to the same transaction, they're likely controlled by the same entity.

```sql
sql

-- Find wallets that interact together
WITH co_interactors AS (
  SELECT 
    from_address,
    to_address,
    COUNT(*) AS interactions
  FROM ethereum.transactions
  WHERE block_time > now() - interval '30 days'
  GROUP BY 1, 2
  HAVING COUNT(*) > 10
)
SELECT * FROM co_interactors
ORDER BY interactions DESC
```

### 2. Deposit/Withdrawal Patterns

Addresses that consistently deposit to and withdraw from the same contracts in similar time periods are often related.

### 3. Gas Source Tracking

New wallets often receive initial ETH for gas from a parent wallet.

```sql
sql

-- Find "seed" transactions (first ETH received)
SELECT 
  to_address AS new_wallet,
  from_address AS likely_owner,
  block_time
FROM ethereum.transactions 
WHERE to_address IN (
  SELECT to_address 
  FROM ethereum.transactions
  GROUP BY to_address
  HAVING MIN(block_number) > 15000000
)
AND value > 0
ORDER BY block_time DESC
```

### 4. Behavioral Fingerprinting

Wallets controlled by the same entity often show similar timing, contract interaction patterns, and gas price settings.

---

## 📋 Wallet Labeling

Beyond clustering, we need to know who's who.

### Sources of Labels:

- ENS domains (`ethereum.ens_*.` tables)
- CEX withdrawal patterns (e.g., Binance hot wallets)
- Public team disclosures
- Protocol-specific roles (DAO participants, protocol admins)
- Community-sourced lists

```sql
sql

-- Simple ENS lookup
SELECT 
  address,
  name
FROM ethereum.ens_latest
WHERE address = LOWER('0xd8dA6BF26964aF9D7eEd9e03E53415D37aA96045')
```

For Vitalik, this would return "vitalik.eth".

---

## 🔄 Activity Tracking

Once we've clustered and labeled wallets, we can track:

- **Active Days**: How often the entity is onchain
- **Activity Type**: Trader, LP, governance participant, etc.
- **Network Reach**: Total interactions with other addresses
- **Asset Portfolio**: Tokens held and their distribution

```sql
sql

-- Active days by wallet
SELECT 
  from_address AS wallet,
  COUNT(DISTINCT date_trunc('day', block_time)) AS active_days
FROM ethereum.transactions
WHERE block_time > now() - interval '90 days'
GROUP BY 1
ORDER BY 2 DESC
LIMIT 50
```

------

## 💡 Real-World Applications

Wallet analysis powers:

1. **Sybil Detection**: Finding users gaming systems with multiple accounts
2. **Market Influence**: Tracking whales and their impact
3. **Protocol Adoption**: Measuring genuine user growth vs transient farming
4. **Security Monitoring**: Identifying suspicious patterns and potential exploits
5. **Investment Strategies**: Following smart money wallets

------

## 🚨 Common Pitfalls

Wallet analytics has pitfalls:

- **False Positives**: Not all co-spending means same ownership
- **Exchange Wallets**: Many users share exchange deposit addresses
- **Protocol Contracts**: Automated smart contracts behave differently than users
- **Privacy Tools**: Tornado Cash and similar tools break clustering
- **Multi-sig Complexity**: Multiple signatures don't always mean multiple owners

Be skeptical of perfect clustering. Context matters.

------

## 🧪 Building a Wallet Analysis Dashboard

Your dashboard might include:

- **Active Users**: De-duplicated count by cluster, not raw address count
- **Whale Concentration**: Assets held by top X% of wallets
- **User Source**: Which platforms or dApps bring users to your protocol
- **Retention**: How many users remain active after X days
- **Funnel**: From first interaction to power user

These metrics are much more insightful than raw transaction counts.

------

## 🧠 Final Thoughts

The best onchain analysts can move from raw transaction data to understanding the motivations, strategies, and behaviors of key actors.

Remember: behind every address is a person, a team, or a bot—with intentions, strategies, and goals.

**Next: 14. L2s and the Rise of Modular Blockchains**
